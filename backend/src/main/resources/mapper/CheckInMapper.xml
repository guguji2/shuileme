<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.slema.mapper.CheckInMapper">

    <!-- 查询用户最近7天的打卡记录 -->
    <select id="findWeeklyCheckIns" resultType="com.slema.entity.CheckIn">
        SELECT *
        FROM check_in
        WHERE user_id = #{userId}
          AND date >= #{startDate}
        ORDER BY date ASC
    </select>

    <!-- 查询用户指定年月的打卡记录 -->
    <select id="findMonthlyCheckIns" resultType="com.slema.entity.CheckIn">
        SELECT *
        FROM check_in
        WHERE user_id = #{userId}
          AND YEAR(date) = #{year}
          AND MONTH(date) = #{month}
        ORDER BY date ASC
    </select>

</mapper>
